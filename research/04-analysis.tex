\chapter{Аналитический раздел}

Дифференциальная приватность обеспечивает защиту личной информации, гарантируя, что результаты анализа не позволят точно определить информацию о конкретных индивидах. 
В рамках ДП данные обрабатываются с добавлением шума, что минимизирует влияние индивидуальных записей на результаты статистических запросов.
Таким образом, даже если в набор данных добавляется или исключается информация о конкретном индивиде, это не влияет на общие выводы о группе~\cite{Wood2018DifferentialPA}.

Представим БД, содержащую медицинские записи 100 человек, из которых 20 страдают диабетом.
Злоумышленник хочет узнать, есть ли у человека $X$ диабет, и уже узнал, что 19 из остальных 99 человек в выборке являются диабетиками.
Запрашивая базу данных и получая информацию о том, что в выборке 20 диабетиков, злоумышленник делает вывод, что человек
$X$ также страдает диабетом.
Этот процесс извлечения дедуктивной информации называется дифференцированной атакой~\cite{harvard}.

Теперь представим, что доступ к данным, хранящихся в БД, предоставляется через систему запросов с дифференциальной приватностью.
Когда злоумышленник делает запрос, система возвращает истинное значение с некоторым случайным шумом.
%Выходные данные могут составлять 21, 25 или 19 в зависимости от случайного шума.
Даже если злоумышленник знает все о других 99 людях, то он не может быть уверен, есть ли у человека $X$ диабет.
Конфиденциальность человека $X$ защищена, поскольку его риск нарушения конфиденциальности остается примерно одинаковым независимо от того, входит ли он в набор данных или нет.
Это справедливо для любого отдельного человека и любого набора данных, независимо от того, насколько необычными или отличительными могут быть данные конкретного индивидуума.~\cite{harvard}
\newpage

\includeimage{diff}{f}{h}{0.8\textwidth}{Принцип ДП}



\section{Типы приватности}

\subsection{$\epsilon$ -- дифференцированная приватность}
Данная $\epsilon$ -- дифференцированная приватность гарантирует, что результаты анализа данных не изменятся, если одна запись будет добавлена или удалена.~\cite{main}

Механизм $M$ обеспечивает $\epsilon$ -- дифференциальную приватность, если для любых двух соседних наборов данных $D$ и $D'$ (различающихся на одну запись) выполняется условие:

\begin{equation}\label{equ:eps-diff}
	Pr[M(D)] \eqslantless \exp(\epsilon) \times Pr[M(D')]
\end{equation}
, где $\epsilon$ --- параметр приватности

\subsection{$(\epsilon$, $\delta)$ -- дифференцированная приватность}
Модель $(\epsilon$, $\delta)$ -- дифференцированной приватности вводит дополнительный параметр $\delta$, который позволяет немного ослабить строгие гарантии приватности.
Параметр $\delta$ предоставляет вероятность того, что гарантия приватности будет нарушена в некоторых случаях.
Это дает гибкость в балансе между приватностью и точностью результатов.~\cite{main}

Механизм $M$ обеспечивает ($\epsilon$, $\delta$) -- дифференциальную приватность, если для любых двух соседних наборов данных $D$ и $D'$ (различающихся на одну запись):

\begin{equation}\label{equ:eps-delta-diff}
	Pr[M(D)] \eqslantless \exp(\epsilon) \times Pr[M(D')] + \delta
\end{equation}
, где $\epsilon$ --- параметр приватности, $\delta$ --- параметр вероятности нарушения приватности



\section{Типы механизмов}

Параметр чувствительности~---~это максимальное изменение результата механизма при изменении одного элемента в базе данных. Чувствительностью механизма $M$ является максимум разности значений механизма для любых двух соседних наборов данных $D$ и $D'$ (различающихся на одну запись) и вычисляется по формуле~\ref{eq:laplas}:
\begin{equation}\label{eq:laplas}
	\Delta M  = \max(|M(D) - M(D')|)
\end{equation}
, где $M$ --- параметр чувствительности.

\subsection{Механизм Лапласа}
Лапласов механизм добавляет к результату запроса шум, сгенерированный из распределения Лапласа~\cite{main}.
Работа Лапласова механизм следует формуле~\ref{eq:laplas}:
\begin{equation}\label{eq:laplas}
	M'(D) = M(D) + \text{Lap}(0, \frac{\Delta M}{\epsilon})
\end{equation}
где $\Delta M$ --- параметр чувствительности, $\epsilon$ --- параметр приватности

\subsection{Механизм Гаусса} 
Гауссов механизм похож на Лапласов, но шум добавляется на основе нормального (Гауссова) распределения.
К результатам запроса добавляется шум по формуле~\ref{eq:gauss-norm}:

\begin{equation}\label{eq:gauss-norm}
	M'(D) = M(D) + \mathcal{N}(0, \sigma^2)
\end{equation}
, где $\mathcal{N}(0, \sigma^2)$ --- нормальное распределение.

Параметр $\sigma$ вычисляется по формуле~\ref{eq:gauss-sigma}.
\begin{equation}\label{eq:gauss-sigma}
	\sigma = \frac{\Delta M \sqrt{2 \ln(1.25/\delta)}}{\epsilon}
\end{equation}

\subsection{Экспоненциальный механизм}
Экспоненциальный механизм работает путем добавления случайности в
процесс выбора элементов, где вероятность выбора каждого элемента зави-
сит от его "качества"(оценки полезности) и параметра приватности.

Для двух соседних наборов данных я $D$ и $D'$  экспоненциальный механизм $M$ обеспечивает $\epsilon$ -- дифференциальную приватность, если вероятность выбора результата $r$ зависит от его полезности $u(r, D)$, и вычисляется по формуле~\ref{eq:exp-mech}
\begin{equation}\label{eq:exp-mech}
	P[M(D)] \propto \exp(\epsilon  u(r, D))
\end{equation}
, где $\epsilon$ --- параметр приватности, $u(r, D)$ --- оценка полезности 

\section{Типы реализаций}
Реализации ДП при работе базами данных классифицируют по 3 типам: 
\begin{enumerate}[label*=---]
	\item многоуровневая реализация;
	\item монолитная реализация;
	\item реализация на уровне СУБД;
\end{enumerate}
%реализация на уровне СУБД, и реализация на уровне фреймворка~\cite{classOfDP}
%\begin{enumerate}[label*=---]
	%\item разделенная архитекутра;
	%\item data publication architecture;
	%\item гибридная архитектура.
%\end{enumerate}
%\subsection{Раздельная архитектура }
%Разделенная архитектура, как показано на рисунке 4, представляет собой реализацию, которая изолирует сервис базы данных от сервиса обработки данных через интерфейс с дифференциальной приватностью.
%База данных предоставляет интерфейс для запросов, который поддерживает традиционные агрегирующие запросы (такие как запросы на подсчет) с гарантией дифференциальной приватности.~\cite{classOfDP}

%\subsection{Data publication architecture}
%В архитектуре публикации данных, как показано на рисунке 3, сервис базы данных использует схему для публикации синтетического набора данных с гарантией конфиденциальности на основе реального набора данных.
%В этом случае интерфейс дифференциальной приватности реализуется внутри базы данных между оригинальными и синтетическими наборами данных.
%Поскольку синтетический набор данных не содержит конфиденциальной информации, любые сервисы обработки данных могут быть непосредственно применены к опубликованному и защищенному синтетическому набору данных.~\cite{classOfDP}

%\subsection{Гибридная архитектура}
%На рисунке 5 показана гибридная архитектура. Она адаптирует интерфейс дифференциальной приватности только для сервисов обработки данных.
%В этой ситуации сервис базы данных разработан для поддержки некоторых специфических запросов для конкретных сервисов обработки данных.
%Преимущество этой архитектуры заключается в том, что реализация дифференциальной приватности оптимизирована для конкретного метода обработки данных.
%Поэтому ожидается, что точность обработки данных будет наивысшей среди трех основных архитектур.
%Недостатком является то, что логика как сервисов обработки данных, так и сервисов базы данных тесно связана.
%Разработчики баз данных должны обрабатывать дополнительные типы запросов для конкретных сервисов обработки данных, которые отличаются от традиционных запросов, поддерживаемых сервисами баз данных.

\subsection{Многоуровневая реализация}
Данная реализация представлена на рисунке~\ref{img:dp-db} и предполагает использование нескольких фреймворков на стороне клиента для реализации ДП.

Наиболее частым решением данной в реализации является использование фреймворка БД для получения данных и фреймворка ДП для обработки данных~\cite{main}

\includeimage{dp-db}{f}{h}{1\textwidth}{Многоуровневая реализация}

\subsection{Монолитная реализаиця}
В данной реализации, как показано на рсиунке~\ref{img:db+dp} один фреймворк выполняет роль интейрфейса как для функционала ДП, так и для интеграции с БД.

\includeimage{db+dp}{f}{h}{1\textwidth}{Монолитная реализация}

\subsection{Реализация на уровне СУБД}
Идея данной реализации представлена на рисунке~\ref{img:arch-int-db} и заключается в добавлении шума к результатам агрегированных запросов, не требуя вмешательства в данные на стороне клиента.

СУБД предоставляет интерфейс для использования методов ДП и гарантирует возврат результата с учетом принципов дифференциальной приватности.~\cite{main}

%Это позволяет проходить запросам через интерфейс ДП без повторного применения алгоритмов на клиентской стороне.~\cite{main}

\includeimage{db-dp}{f}{h}{1\textwidth}{Архитектура на уровне БД}

%\subsection{Реализация на уровне фреймворка}
%Данная реализация предполагает использование готовых фреймворков, которые интегрируют механизмы ДП в различные приложения.

%\includeimage{arch-int-client}{f}{h}{0.92\textwidth}{Реализация на уровне фреймворка}


\section{Критерии сравнений}

Из выше приведенного анализа предметной области были выделены следующе критерии сравнения ПО с возможностью дифференциальной приватности для баз данных:
\begin{enumerate}[label*=---]
	\item тип приватности; 
	\item поддерживаемые механизмы;
	\item тип реализации;
	% \item тип обработки запросов;
	%\item интеграция с БД;
	%\item скорость работы
\end{enumerate}
Первый критерий важен, т.~к. является ключевым значением в реализации ДП основой всех механизмов приватности в целом.
Поддерживаемые механизмы были выделены как критерий, потому что в большей мере влияют на функционал ПО, предлагаемого пользователю.
Тип реализации был выбран из--за разных подходов к взаимодействию с базами данных.


